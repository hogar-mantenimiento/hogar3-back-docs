"use strict";(globalThis.webpackChunkhogar_3_back_docs=globalThis.webpackChunkhogar_3_back_docs||[]).push([[6152],{7407:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>h,frontMatter:()=>d,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"Components/GlobalFunctions","title":"Funciones Globales \ud83c\udf0d","description":"Existen m\xe9todos de utilidad importables mediante la inyecci\xf3n de servicios que brindan funcionalidades comunes y estandarizadas en toda la aplicaci\xf3n.","source":"@site/docs/Components/GlobalFunctions.md","sourceDirName":"Components","slug":"/Components/GlobalFunctions","permalink":"/hogar3-back-docs/docs/Components/GlobalFunctions","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Components/GlobalFunctions.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"Entidades Gen\xe9ricas \ud83d\udcbe","permalink":"/hogar3-back-docs/docs/Components/EntitiesGenerics"},"next":{"title":"Procesos o pasos de desarrollo","permalink":"/hogar3-back-docs/docs/category/procesos-o-pasos-de-desarrollo"}}');var r=s(4848),l=s(8453);const d={sidebar_position:5},i="Funciones Globales \ud83c\udf0d",o={},c=[{value:"<code>CommonService</code>",id:"commonservice",level:2},{value:"Manejo de Errores",id:"manejo-de-errores",level:3},{value:"Ejemplo de <code>handleErrorManual</code>",id:"ejemplo-de-handleerrormanual",level:4},{value:"M\xe9todos Generales para el Tiempo \u23f1\ufe0f",id:"m\xe9todos-generales-para-el-tiempo-\ufe0f",level:3},{value:"M\xe9todos para Archivos e Im\xe1genes \ud83d\uddbc\ufe0f",id:"m\xe9todos-para-archivos-e-im\xe1genes-\ufe0f",level:3},{value:"Utilidades Varias",id:"utilidades-varias",level:3},{value:"M\xe9todos Obsoletos (Deprecated)",id:"m\xe9todos-obsoletos-deprecated",level:3},{value:"<code>Color Helper</code>",id:"color-helper",level:2},{value:"createColor(text: string): string",id:"createcolortext-string-string",level:3},{value:"<code>Gemini Service</code>",id:"gemini-service",level:2},{value:"M\xe9todos de Generaci\xf3n",id:"m\xe9todos-de-generaci\xf3n",level:3}];function a(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"funciones-globales-",children:"Funciones Globales \ud83c\udf0d"})}),"\n",(0,r.jsx)(n.p,{children:"Existen m\xe9todos de utilidad importables mediante la inyecci\xf3n de servicios que brindan funcionalidades comunes y estandarizadas en toda la aplicaci\xf3n."}),"\n",(0,r.jsxs)(n.p,{children:["Estos m\xe9todos provienen en su mayor\xeda del m\xf3dulo ",(0,r.jsx)(n.code,{children:"Common"})," y se acceden a trav\xe9s de su service principal, ",(0,r.jsx)(n.code,{children:"CommonService"}),"."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"commonservice",children:(0,r.jsx)(n.code,{children:"CommonService"})}),"\n",(0,r.jsx)(n.h3,{id:"manejo-de-errores",children:"Manejo de Errores"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"M\xe9todo"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Retorno"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Descripci\xf3n"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"GenHandleError(error: any)"})})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"[statuscode: number, message: any]"})}),(0,r.jsxs)(n.td,{style:{textAlign:"left"},children:["Devuelve un formato de error gen\xe9rico (",(0,r.jsx)(n.code,{children:"[c\xf3digo de estado, mensaje]"}),") para constructos de manejo de errores. Es usado principalmente por clases internas."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"handleError(error: any)"})})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"void"})}),(0,r.jsxs)(n.td,{style:{textAlign:"left"},children:["El manejador de errores por defecto y original. Aunque existi\xf3, actualmente su funcionalidad est\xe1 abstra\xedda dentro del decorador ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"@CatchError"})}),"."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"handleErrorManual(error: any, res: Express.Response)"})})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"void"})}),(0,r.jsxs)(n.td,{style:{textAlign:"left"},children:["Manejador espec\xedfico para situaciones donde ",(0,r.jsx)(n.strong,{children:"no se puede usar"})," el decorador ",(0,r.jsx)(n.code,{children:"@CatchError"})," (t\xedpicamente en funciones que requieren el objeto ",(0,r.jsx)(n.code,{children:"Response"})," de ",(0,r.jsx)(n.strong,{children:"Express"}),")."]})]})]})]}),"\n",(0,r.jsxs)(n.h4,{id:"ejemplo-de-handleerrormanual",children:["Ejemplo de ",(0,r.jsx)(n.code,{children:"handleErrorManual"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",metastring:'title="Uso con Response de Express"',children:"import { Response } from 'express';\nimport { CommonService } from './common.service';\n\nclass ZService(){\n\n    constructor(\n        private readonly common: CommonService,\n    ){}\n\n    metodoQueUsaResponse(res: Response){\n        try{\n            // l\xf3gica del m\xe9todo\n        }\n        catch (error){\n            this.common.handleErrorManual(error, res) // Maneja y env\xeda la respuesta de error\n        }\n    }\n}\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"m\xe9todos-generales-para-el-tiempo-\ufe0f",children:"M\xe9todos Generales para el Tiempo \u23f1\ufe0f"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"M\xe9todo"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Retorno"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Descripci\xf3n"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"formatMIlliesToHHMM(ms: number)"})})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsxs)(n.td,{style:{textAlign:"left"},children:["Convierte una cantidad de tiempo en milisegundos (",(0,r.jsx)(n.code,{children:"ms"}),") al formato ",(0,r.jsx)(n.code,{children:"HH:MM"})," para una expresi\xf3n m\xe1s legible del tiempo."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"currentDayMMDD()"})})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsxs)(n.td,{style:{textAlign:"left"},children:["Devuelve la fecha actual sin el a\xf1o con el formato ",(0,r.jsx)(n.code,{children:"MM-DD"})," (Mes-D\xeda)."]})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"m\xe9todos-para-archivos-e-im\xe1genes-\ufe0f",children:"M\xe9todos para Archivos e Im\xe1genes \ud83d\uddbc\ufe0f"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"M\xe9todo"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Retorno"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Descripci\xf3n"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"GenPathImage(file: Express.Multer.File)"})})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsxs)(n.td,{style:{textAlign:"left"},children:["Devuelve la direcci\xf3n real en disco de un archivo subido, generalmente con el decorador ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"@SaveImage"})}),". Pensado para ser una utilidad universal."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"ServeImage(filePath: string, res: Express.Response, fileActions?: FileActions)"})})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"void"})}),(0,r.jsxs)(n.td,{style:{textAlign:"left"},children:["Funciona en complemento con ",(0,r.jsx)(n.code,{children:"GenPathImage"}),". Sirve para ",(0,r.jsx)(n.strong,{children:"devolver"}),' al cliente un archivo particular. Aunque tienen "Image" en el nombre, funcionan para ',(0,r.jsx)(n.strong,{children:"cualquier tipo de archivo"}),"."]})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["El par\xe1metro ",(0,r.jsx)(n.code,{children:"fileActions"})," es un ",(0,r.jsx)(n.code,{children:"enum"})," con los valores ",(0,r.jsx)(n.code,{children:"download"})," y ",(0,r.jsx)(n.code,{children:"load"}),". Por defecto, ",(0,r.jsx)(n.code,{children:"ServeImage"})," usa ",(0,r.jsx)(n.code,{children:"load"})," (mostrar en el navegador)."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"utilidades-varias",children:"Utilidades Varias"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"M\xe9todo"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Retorno"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Descripci\xf3n"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"Logger(message: string)"})})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"void"})}),(0,r.jsxs)(n.td,{style:{textAlign:"left"},children:["Simplemente un ",(0,r.jsx)(n.em,{children:"logger"})," que imprime el mensaje que se le env\xeda."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"validateRole(user: User, ...validRoles: Permisos[])"})})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"boolean"})}),(0,r.jsxs)(n.td,{style:{textAlign:"left"},children:["Valida si el ",(0,r.jsx)(n.code,{children:"user"})," tiene alguno de los permisos (",(0,r.jsx)(n.code,{children:"Permisos[]"}),") indicados o si es ",(0,r.jsx)(n.strong,{children:"Admin"}),". Devuelve ",(0,r.jsx)(n.code,{children:"true"})," si cumple, ",(0,r.jsx)(n.code,{children:"false"})," en caso contrario."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"normalizarTexto(str: string)"})})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsxs)(n.td,{style:{textAlign:"left"},children:["Formatea el ",(0,r.jsx)(n.em,{children:"string"})," de entrada para usar el alfabeto latino est\xe1ndar (elimina diacr\xedticos, acentos y caracteres no romanos)."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:'validatorType(type: "string" | "int" | "float" | "date" | "boolean", value: any)'})})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"boolean"})}),(0,r.jsxs)(n.td,{style:{textAlign:"left"},children:["Devuelve si el ",(0,r.jsx)(n.code,{children:"value"})," proporcionado es del ",(0,r.jsx)(n.code,{children:"type"})," especificado."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:'normalizarTexto(type: "string" | "int" | "float" | "date" | "boolean", value: any)'})})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"any"})}),(0,r.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,r.jsx)(n.strong,{children:"Convierte"})," el ",(0,r.jsx)(n.code,{children:"value"})," al ",(0,r.jsx)(n.code,{children:"type"})," indicado."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"async sleep(seconds: number)"})})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"Promise<void>"})}),(0,r.jsxs)(n.td,{style:{textAlign:"left"},children:['"Duerme" o pausa la ejecuci\xf3n de una funci\xf3n as\xedncrona durante la cantidad de ',(0,r.jsx)(n.code,{children:"seconds"})," especificada."]})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"m\xe9todos-obsoletos-deprecated",children:"M\xe9todos Obsoletos (Deprecated)"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"M\xe9todo"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Descripci\xf3n"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"catchError(promise: Promise)"})})}),(0,r.jsxs)(n.td,{style:{textAlign:"left"},children:["Funci\xf3n antigua que abstra\xeda el bloque ",(0,r.jsx)(n.code,{children:"try/catch"})," dentro de una promesa. ",(0,r.jsx)(n.strong,{children:"No se recomienda su uso."})," a favor de usar ",(0,r.jsx)(n.code,{children:"@CatchError"})]})]})})]}),"\n",(0,r.jsx)(n.h2,{id:"color-helper",children:(0,r.jsx)(n.code,{children:"Color Helper"})}),"\n",(0,r.jsxs)(n.p,{children:["A trav\xe9s del servicio ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"ColorHelperSErvice"})}),", se accede a la funci\xf3n para generar colores personalizados."]}),"\n",(0,r.jsx)(n.h3,{id:"createcolortext-string-string",children:"createColor(text: string): string"}),"\n",(0,r.jsxs)(n.p,{children:["Devuelve un color ",(0,r.jsx)(n.em,{children:"custom"})," (generalmente un ",(0,r.jsx)(n.em,{children:"hash"})," de color) basado en el contenido del ",(0,r.jsx)(n.code,{children:"text"})," de entrada, asegurando que el color generado sea consistente para el mismo texto."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"gemini-service",children:(0,r.jsx)(n.code,{children:"Gemini Service"})}),"\n",(0,r.jsxs)(n.p,{children:["Este es un servicio interno para la comunicaci\xf3n con la plataforma ",(0,r.jsx)(n.strong,{children:"GEMINI"})," (Google AI)."]}),"\n",(0,r.jsx)(n.h3,{id:"m\xe9todos-de-generaci\xf3n",children:"M\xe9todos de Generaci\xf3n"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"M\xe9todo"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Argumentos"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Descripci\xf3n"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"async generateFromData(promptType: TextPromptType, data: any)"})})}),(0,r.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,r.jsx)(n.code,{children:"promptType"}),", ",(0,r.jsx)(n.code,{children:"data"})]}),(0,r.jsxs)(n.td,{style:{textAlign:"left"},children:["A partir de un tipo de ",(0,r.jsx)(n.em,{children:"prompt"})," precargado y los datos que le llegan, consulta a Gemini sobre el tema y devuelve una respuesta en formato ",(0,r.jsx)(n.em,{children:"string"}),"."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"async generateFromImage(promptType: TextPromptType, image)"})})}),(0,r.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,r.jsx)(n.code,{children:"promptType"}),", ",(0,r.jsx)(n.code,{children:"image"})]}),(0,r.jsxs)(n.td,{style:{textAlign:"left"},children:["Se le env\xeda una imagen a Gemini, usando un ",(0,r.jsx)(n.em,{children:"prompt"})," espec\xedfico, y este devuelve el resultado de su an\xe1lisis de la imagen."]})]})]})]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>i});var t=s(6540);const r={},l=t.createContext(r);function d(e){const n=t.useContext(l);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),t.createElement(l.Provider,{value:n},e.children)}}}]);